# 2.2.14 Cycle 14: Health bar

## Design

In this cycle, I will be setting up the player's health bar. The player will have ten health points, each represented by a red heart. Health points the player has lost will be represented by dark grey hearts. For example, a player with 7 health points would have 7 red hearts and 3 dark grey hearts.&#x20;

When the player runs out of health points, they will die which will involve the screen turning black and slowly fading back in over a period of ten seconds during which the player will be unable to move their car.

### Objectives

* [x] Add health property to the player with value of 10.
* [x] Continually destroy and draw hearts representing the health points.
* [x] Draw red hearts for each health point the player still has.
* [x] Draw grey hearts for health points the player has lost.
* [x] When the player runs out of health (dies), stop them moving.
* [x] Cover the screen in black and slowly fade away over 10 seconds.
* [x] Restore 1 health point a second.
* [x] After reviving, allow the player to move again.

### Usability Features

### Key Variables

| Variable Name | Use |
| ------------- | --- |
|               |     |

### Pseudocode

{% code title="sprites/car.js" %}
```
func setupHealth(car):
    car.health = 10
    
    update:
        if car.health < 0:
            car.health = 0
            
        if car.health > 10:
            car.health = 10
            
        destroySprites("heart")
        
        for i in range(0, 10):
            add({
                sprite: (i < car.health) then "heart" else "heart_empty",
                fixed,
                pos: {
                    x: 20 + (i * 30),
                    y: 20,
                    z: 3
                },
                "heart"
            })
            
        if car.health == 0:
            die(car)
            
func die(car):
    car.acceleration = 0
    car.speed = 0
    car.angle = 0
    
    function revive(o = 1):
        destroySprites("black")
        
        add({
            rectangle: screenWidth, screenHeight,
            colour: black,
            fixed,
            opacity: o,
            pos: {
                x: 0,
                y: 0,
                z: 4
            },
            "black"
        })
        
        car.health++
        
        if o > 0:
            setTimeout(revive, args = o - 0.1, 1000)
        else:
            car.acceleration = 0.2
            
    revive()
```
{% endcode %}

## Development

### Outcome



### Challenges



## Testing

Evidence for testing

### Tests

<table><thead><tr><th width="95">Test</th><th width="158">Instructions</th><th width="171">What I expect</th><th width="174">What actually happens</th><th>Pass/Fail</th></tr></thead><tbody><tr><td>1</td><td>Draw red hearts for the player's health points and grey for any points they are missing.</td><td>The number of red hearts will be the player's health points. Grey hearts will represent lost health.</td><td>As expected</td><td>Pass</td></tr><tr><td>2</td><td>If the player dies, cover the screen in black and fade over 10 seconds, restoring 1 health a second.</td><td>When the player dies, their screen is covered in black which fades away over 10 seconds. Afterwards they are restored to full health.</td><td>As expected</td><td>Pass</td></tr><tr><td>3</td><td>Stop the player moving while they are reviving.</td><td>The player is unable to move while they are being revived.</td><td>As expected</td><td>Pass</td></tr></tbody></table>

### Evidence

<figure><img src="../.gitbook/assets/image (61).png" alt=""><figcaption><p>Test 1: 10 health points</p></figcaption></figure>

<figure><img src="../.gitbook/assets/image (62).png" alt=""><figcaption><p>Test 1: 5 health points</p></figcaption></figure>

<figure><img src="../.gitbook/assets/image (63).png" alt=""><figcaption><p>Test 1: 0 health points</p></figcaption></figure>

{% embed url="https://youtu.be/ySRdA3FxiI0" %}
Test 2: When the player's health reaches 0, the screen goes black which fades away over 10 seconds while health is restored
{% endembed %}

{% embed url="https://youtu.be/34Q0A1f5BHs" %}
Test 3: Player cannot move while they are dead
{% endembed %}
