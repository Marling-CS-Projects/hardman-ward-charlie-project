# 2.2.11 Cycle 11: Stopwatch

## Design

In this cycle I will be adding a stopwatch. This stopwatch will appear in the top right corner of the screen and count how many minutes and seconds between the time the countdown finished and the player finishes the race. It serves as a helpful indicator for how long the player has been racing for and how long it takes for them to finish each level.

### Objectives

* [x] Display text for stopwatch in the top right of the screen.
* [x] When the countdown finishes, increase the seconds on the stopwatch by 1 every second.
* [x] When the seconds reaches 60, reset to 0 and increase minutes by 1.

### Usability Features

### Key Variables

| Variable Name | Use                                                         |
| ------------- | ----------------------------------------------------------- |
| stopwatch     | Text to display minutes and seconds elapsed since starting. |
| s             | Update stopwatch every second.                              |
| minutes       | Number of full minutes elapsed since starting.              |
| seconds       | Number of remaining seconds.                                |

### Pseudocode

{% code title="scenes/level.js" %}
```
stopwatch = add_text("00:00", x: width, y: 0, props: {
    minutes: 0,
    seconds: 0
})

receiveEvent("go", func () {
    func updateStopwatch() {
        stopwatch.seconds++
        
        if stopwatch.seconds == 60:
            stopwatch.minutes++
            stopwatch.seconds = 0
            
        secondsFormat = ('0' + stopwatch.seconds).slice(-2)
        minutesFormat = stopwatch.minutes < 10  then: ('0' + stopwatch.minutes).slice(-2)  else: stopwatch.minutes

        stopwatch.setText(minutesFormat + ":" + secondsFormat)
        
        s = setTimeout(updateStopwatch, 1000)
    }
    
    s = setTimeout(updateStopwatch, 1000)
})
```
{% endcode %}

## Development

### Outcome



### Challenges



## Testing

Evidence for testing

### Tests

<table><thead><tr><th width="95">Test</th><th width="158">Instructions</th><th width="171">What I expect</th><th width="174">What actually happens</th><th>Pass/Fail</th></tr></thead><tbody><tr><td>1</td><td>Add stopwatch text to top right of screen.</td><td>Text with minutes and seconds in top right of the screen.</td><td>Text invisible.</td><td>Fail</td></tr><tr><td>2</td><td>Set the z property of the stopwatch text to "3"</td><td>Text with minutes and seconds in top right of the screen.</td><td>As expected</td><td>Pass</td></tr><tr><td>3</td><td>Enlarge stopwatch text.</td><td>Stopwatch text a little bit larger and more visible.</td><td>As expected</td><td>Pass</td></tr><tr><td>4</td><td>Increment seconds by 1 every second. If seconds reaches 60, carry over to minutes.</td><td>Stopwatch increases for every second. If seconds reaches 60, it is reset to 0 and minutes is incremented.</td><td>As expected</td><td>Pass</td></tr></tbody></table>

### Evidence

<figure><img src="../.gitbook/assets/image (53).png" alt=""><figcaption><p>Test 1: Stopwatch text not showing in top right corner</p></figcaption></figure>

<figure><img src="../.gitbook/assets/image (54).png" alt=""><figcaption><p>Test 2: Stopwatch text shows in top right corner of screen, but is a bit too small and there's no space around it</p></figcaption></figure>

<figure><img src="../.gitbook/assets/image (55).png" alt=""><figcaption><p>Test 3: Stopwatch text now larger and with space around it</p></figcaption></figure>

{% embed url="https://youtu.be/B5BdvV80m8Q" %}
Test 4: Stopwatch increases by 1 second every second. When seconds reaches 60, they are set back to 0 and minutes are increased by 1.
{% endembed %}
