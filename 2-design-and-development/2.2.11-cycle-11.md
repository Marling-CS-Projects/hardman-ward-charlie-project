# 2.2.11 Cycle 11: Stopwatch

## Design

In this cycle I will be adding a stopwatch. This stopwatch will appear in the top right corner of the screen and count how many minutes and seconds between the time the countdown finished and the player finishes the race. It serves as a helpful indicator for how long the player has been racing for and how long it takes for them to finish each level.

### Objectives

* [x] Add text for stopwatch in the top right corner of the screen in the format HH:MM (00:00 at the start).
* [x] When the "go" event is received (countdown from 3 has finished), increment seconds by 1 every second.
* [x] If seconds is 60, set it to 0 and increment minutes by 1.
* [x] Update stopwatch text with new values.

### Usability Features

### Key Variables

| Variable Name | Use                                                                                                                    |
| ------------- | ---------------------------------------------------------------------------------------------------------------------- |
| stopwatch     | Text at the top right of the screen displaying the minutes and seconds that have elapsed since the countdown finished. |

### Pseudocode

{% code title="scenes/level.js" %}
```
stopwatch = add([
    text: "00:00",
    colour: lightgrey,
    size: 25px,
    fixed,
    anchor: "topright",
    pos: width, 0,
    properties: {
        minutes: 0,
        seconds: 0
    }
])

receiveEvent("go", func () {
    func updateStopwatch() {
        stopwatch.seconds++
        
        if stopwatch.seconds == 60:
            stopwatch.minutes++
            stopwatch.seconds = 0
            
        secondsFormat = ('0' + stopwatch.seconds).slice(-2)
        minutesFormat = stopwatch.minutes < 10  then: ('0' + stopwatch.minutes).slice(-2)  else: stopwatch.minutes

        stopwatch.setText(minutesFormat + ":" + secondsFormat)
        
        s = setTimeout(updateStopwatch, 1000)
    }
    
    s = setTimeout(updateStopwatch, 1000)
})
```
{% endcode %}

## Development

### Outcome



### Challenges



## Testing

Evidence for testing

### Tests

<table><thead><tr><th width="95">Test</th><th width="158">Instructions</th><th width="171">What I expect</th><th width="174">What actually happens</th><th>Pass/Fail</th></tr></thead><tbody><tr><td>1</td><td>Display stopwatch text in top right corner of level scene.</td><td>Text "00:00" in light grey visible in top right corner of the screen.</td><td>Text doesn't show.</td><td>Fail</td></tr><tr><td>2</td><td>Add "z" property of 3 to stopwatch text so it appears on top of other sprites such as blocks.</td><td>Text "00:00" in light grey visible in top right corner of the screen.</td><td>As expected</td><td>Pass</td></tr><tr><td>3</td><td>Enlarge stopwatch text and add a small margin.</td><td>Text "00:00" slightly larger and with a small amount of space between it and the top right corner of the screen.</td><td>As expected</td><td>Pass</td></tr><tr><td>4</td><td>Increment stopwatch seconds by 1 every second. If seconds equals 60, reset to 0 and increment minutes. Update text to show new values.</td><td>One second is added onto the stopwatch text every second. When a minute has passed, seconds resets to 0 and one minute is added.</td><td>As expected</td><td>Pass</td></tr></tbody></table>

### Evidence

<figure><img src="../.gitbook/assets/image (53).png" alt=""><figcaption><p>Test 1: Stopwatch text not showing in top right corner</p></figcaption></figure>

<figure><img src="../.gitbook/assets/image (54).png" alt=""><figcaption><p>Test 2: Stopwatch text shows in top right corner of screen, but is a bit too small and there's no space around it</p></figcaption></figure>

<figure><img src="../.gitbook/assets/image (55).png" alt=""><figcaption><p>Test 3: Stopwatch text now larger and with space around it</p></figcaption></figure>

{% embed url="https://youtu.be/B5BdvV80m8Q" %}
Test 4: Stopwatch increases by 1 second every second. When seconds reaches 60, they are set back to 0 and minutes are increased by 1.
{% endembed %}
